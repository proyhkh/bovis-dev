
<p-toast></p-toast>


<div class="main-container">

    <h1>Usuarios</h1>

    <!-- <p-toolbar styleClass="p-1 mb-2 d-flex justify-content-start gap-2">  
        <button 
        type="submit" 
        class="btn btn-info"
        routerLink="/usuarios/registro"
        >
        Nuevo
        </button>
    </p-toolbar> -->

    <p-table 
        #tablaPrincipal
        class="tabla-filtro"
        [value]="usuarios" 
        [paginator]="true"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} registros"
        [rowsPerPageOptions]="[10, 25, 50]"
        [rows]="10"
        [globalFilterFields]="['numEmpleado', 'empleado']"
    >
        <ng-template pTemplate="caption">
        <div class="flex">
            <span class="p-input-icon-left ml-auto">
                <i class="pi pi-search"></i>
                <input pInputText #buscador type="text" (input)="tablaPrincipal.filterGlobal(buscador.value, 'contains')" placeholder="Buscar..." />
            </span>
        </div>
        </ng-template>
        <ng-template pTemplate="header">
        <tr>
            <!-- <th>ID</th> -->
            <th pSortableColumn="numEmpleado"><div class="d-flex align-items-center">Número de empleado <p-sortIcon field="numEmpleado"></p-sortIcon></div></th>
            <th pSortableColumn="empleado"><div class="d-flex align-items-center">Empleado <p-sortIcon field="empleado"></p-sortIcon></div></th>
            <th class="text-center">Activo</th>
            <th pSortableColumn="ultimaSesion"><div class="d-flex align-items-center">Última sesión <p-sortIcon field="ultimaSesion"></p-sortIcon></div></th>
            <th class="text-center">Opciones</th>
        </tr>
        </ng-template>
        <ng-template pTemplate="body" let-usuario let-i="rowIndex">
        <tr>
            <!-- <td>{{usuario.idUsuario}}</td> -->
            <td>{{usuario.numEmpleado}}</td>
            <td>{{usuario.empleado}}</td>
            <td class="text-center">
                <p-badge severity="success" *ngIf="usuario.activo"></p-badge>
            </td>
            <td>{{usuario.ultimaSesion}}</td>
            <td class="text-center">
                <div class="d-flex justify-content-center gap-3">
                    <button
                        title="Modificar perfiles" 
                        pButton 
                        pRipple 
                        icon="pi pi-cog" 
                        class="p-button-rounded p-button-info p-mr-2"
                        [routerLink]="['/usuarios/principal/asignar-perfiles', usuario.idUsuario]"
                    ></button>
                    <!-- <button
                        title="Eliminar usuario" 
                        pButton 
                        pRipple 
                        icon="pi pi-trash" 
                        class="p-button-rounded p-button-info p-mr-2 p-button-danger"
                        (click)="eliminarUsuario(usuario.idUsuario, i)"
                    ></button> -->
                </div>
            </td>
        </tr>
        </ng-template>
    </p-table>
</div>