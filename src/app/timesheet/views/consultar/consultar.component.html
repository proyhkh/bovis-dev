
<p-toast></p-toast>

<div class="main-container">
  <div class="row">
    <div class="col-4">
        <label for="proyecto">Proyecto:</label>
        <p-dropdown 
          id="proyecto" 
          [options]="proyectos"
          placeholder="Seleccionar una proyecto" 
          optionLabel="name"
          [showClear]="true"
          [style]="{ width: '100%' }"
          (onChange)="buscarRegistros($event, 'proyecto')"
          [(ngModel)]="idProyecto"
          optionValue="code"
          [filter]="true" 
          filterBy="name"
        ></p-dropdown>
    </div>
    <div class="col-4">
        <label for="empleado">Empleado:</label>
        <p-dropdown 
          id="empleado" 
          [options]="empleados"
          placeholder="Seleccionar una empleado" 
          optionLabel="name"
          [showClear]="true"
          [style]="{ width: '100%' }"
          (onChange)="buscarRegistros($event, 'empleado')"
          [(ngModel)]="idEmpleado"
          optionValue="code"
          [filter]="true" 
          filterBy="name"
        ></p-dropdown>
    </div>
    <div class="col-4">
        <label>Unidad de negocio:</label>
        <p-dropdown 
          id="unidad" 
          [options]="unidades"
          placeholder="Seleccionar una unidad" 
          optionLabel="name"
          [showClear]="true"
          [style]="{ width: '100%' }"
          (onChange)="buscarRegistros($event, 'unidad')"
          [(ngModel)]="idUnidad"
          optionValue="code"
          [filter]="true" 
          filterBy="name"
        ></p-dropdown>
    </div>
    <div class="col-4">
        <label>Mes:</label>
        <p-calendar 
          view="month" 
          dateFormat="m/yy" 
          [readonlyInput]="true" 
          (onSelect)="buscarRegistros($event, 'mes')"
          [style]="{width: '100%'}"
          placeholder="Seleccionar un mes..."
          [(ngModel)]="mes"
        ></p-calendar>
    </div>
  </div>

  <p-table 
    [value]="timesheets" 
    [tableStyle]="{ 'min-width': '50rem' }"
    [paginator]="true"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} registros"
    [rowsPerPageOptions]="[10, 25, 50]"
    [rows]="10"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Mes</th>
        <th>AÃ±o</th>
        <th>Empleado</th>
        <th>Proyectos</th>
        <th>Opciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ts>
      <tr>
        <td>{{ts.mes}}</td>
        <td>{{ts.empleado}}</td>
        <td>{{ts.anio}}</td>
        <td>{{ts.proyectos | proyectoJoin}}</td>
        <td>
          <button 
            title="txtEditar" 
            pButton 
            pRipple 
            icon="pi pi-pencil" 
            class="p-button-rounded p-button-success p-mr-2"
            [routerLink]="['/timesheet/cargar-horas', ts.id]"
          ></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>